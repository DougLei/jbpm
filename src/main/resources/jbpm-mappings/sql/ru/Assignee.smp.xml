<?xml version="1.0" encoding="UTF-8"?>
<mapping-configuration>
	<sql namespace="Assignee">
	
		<!-- 查询指派的人员配置的委托信息 -->
		<content name="queryDelegations" type="select">
			select client_id, assignee_id, reason, procdef_code, procdef_version from bpm_re_delegation p
				left join bpm_re_delegation_detail s on (p.id = s.delegation_id)
					where p.is_enabled=1 and p.start_time &lt; #{currentTime, dataType=number, length=13} and p.end_time &gt; #{currentTime, dataType=number, length=13} 
					<foreach collection="userIds" alias="userId" open="and p.client_id in (" separator="," close=")">
						#{userId}
					</foreach>
		</content>
		
		<!-- 根据parentUserIds查询对应上一层的指派信息集合 -->
		<content name="queryAssigneeListByParentUserIds" type="select">
			select * from bpm_ru_assignee where taskinst_id= #{taskinstId} 
				<foreach collection="parentUserIds" alias="parentUserId" open="and user_id in (" separator="," close=")">
					#{parentUserId}
				</foreach>
		</content>
		
	</sql>
</mapping-configuration>